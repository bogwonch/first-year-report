digraph shop {

  Policies [label="Policies"         shape=cds       fontname="LMSans10-Regular"];
  Server   [label="Server"           shape=rectangle fontname="LMSans10-Regular"];
  Device   [label="Device"           shape=oval      fontname="LMSans10-Regular"];
  Users    [label="Users\nDB"        shape=Mcircle   fontname="LMSans10-Regular"];
  Apps     [label="Apps\nDB"         shape=Mcircle   fontname="LMSans10-Regular"];
  Shop     [label="Shop"             shape=rectangle fontname="LMSans10-Regular"];
  Checks   [label="Expert\nServices" shape=diamond   fontname="LMSans10-Regular"];

  {rank=source Apps Users};
  {rank=same Policies Server Checks};
  {rank=sink Device};

  Apps     -> Server;
  Policies -> Device;
  Policies -> Server;
  Server   -> Apps;
  Server   -> Users;
  Server   -> Shop -> Device;
  Users    -> Policies;
  Device   -> Shop -> Server;
  Checks -> Apps;
  Apps     -> Checks;
  Checks -> Device;


}

